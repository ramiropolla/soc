Index: libavcodec/golomb.h
===================================================================
--- libavcodec/golomb.h	(revision 11230)
+++ libavcodec/golomb.h	(working copy)
@@ -504,4 +504,31 @@
     set_ur_golomb_jpegls(pb, v, k, limit, esc_len);
 }
 
+/**
+ * write unsigned interleaved exponential golomb code (Dirac)
+ */
+static inline void dirac_set_ue_golomb(PutBitContext *pb, int i)
+{
+    int log = av_log2(++i);
+    while(log) {
+        log--;
+        put_bits(pb, 1, 0);
+        put_bits(pb, 1, (i >> log)&1);
+    }
+    put_bits(pb, 1, 1);
+}
+
+/**
+ * write signed interleaved exponential golomb code (Dirac)
+ */
+static inline void dirac_set_se_golomb(PutBitContext *pb, int i)
+{
+    dirac_set_ue_golomb(pb, FFABS(i));
+    if (i > 0)
+        put_bits(pb, 1, 0);
+    else if (i < 0)
+        put_bits(pb, 1, 1);
+}
+
+
 #endif /* FFMPEG_GOLOMB_H */
Index: libavcodec/Makefile
===================================================================
--- libavcodec/Makefile	(revision 11230)
+++ libavcodec/Makefile	(working copy)
@@ -56,6 +56,8 @@
 OBJS-$(CONFIG_CSCD_DECODER)            += cscd.o
 OBJS-$(CONFIG_CYUV_DECODER)            += cyuv.o
 OBJS-$(CONFIG_DCA_DECODER)             += dca.o
+OBJS-$(CONFIG_DIRAC_DECODER)           += diracdec.o dirac.o dirac_arith.o dirac_wavelet.o golomb.o
+OBJS-$(CONFIG_DIRAC_ENCODER)           += diracenc.o dirac.o dirac_arith.o dirac_wavelet.o golomb.o
 OBJS-$(CONFIG_DNXHD_DECODER)           += dnxhddec.o dnxhddata.o
 OBJS-$(CONFIG_DNXHD_ENCODER)           += dnxhdenc.o dnxhddata.o mpegvideo_enc.o motion_est.o ratecontrol.o
 OBJS-$(CONFIG_DSICINVIDEO_DECODER)     += dsicinav.o
@@ -314,6 +316,7 @@
 OBJS-$(CONFIG_AC3_PARSER)              += ac3_parser.o ac3tab.o aac_ac3_parser.o
 OBJS-$(CONFIG_CAVSVIDEO_PARSER)        += cavs_parser.o
 OBJS-$(CONFIG_DCA_PARSER)              += dca_parser.o
+OBJS-$(CONFIG_DIRAC_PARSER)            += dirac_parser.o
 OBJS-$(CONFIG_DVBSUB_PARSER)           += dvbsub_parser.o
 OBJS-$(CONFIG_DVDSUB_PARSER)           += dvdsub_parser.o
 OBJS-$(CONFIG_H261_PARSER)             += h261_parser.o
Index: libavcodec/allcodecs.c
===================================================================
--- libavcodec/allcodecs.c	(revision 11230)
+++ libavcodec/allcodecs.c	(working copy)
@@ -73,6 +73,7 @@
     REGISTER_DECODER (CLJR, cljr);
     REGISTER_DECODER (CSCD, cscd);
     REGISTER_DECODER (CYUV, cyuv);
+    REGISTER_ENCDEC  (DIRAC, dirac);
     REGISTER_ENCDEC  (DNXHD, dnxhd);
     REGISTER_DECODER (DSICINVIDEO, dsicinvideo);
     REGISTER_ENCDEC  (DVVIDEO, dvvideo);
@@ -283,6 +284,7 @@
     REGISTER_PARSER  (AC3, ac3);
     REGISTER_PARSER  (CAVSVIDEO, cavsvideo);
     REGISTER_PARSER  (DCA, dca);
+    REGISTER_PARSER  (DIRAC, dirac);
     REGISTER_PARSER  (DVBSUB, dvbsub);
     REGISTER_PARSER  (DVDSUB, dvdsub);
     REGISTER_PARSER  (H261, h261);
Index: libavcodec/avcodec.h
===================================================================
--- libavcodec/avcodec.h	(revision 11230)
+++ libavcodec/avcodec.h	(working copy)
@@ -169,6 +169,7 @@
     CODEC_ID_VP6A,
     CODEC_ID_AMV,
     CODEC_ID_VB,
+    CODEC_ID_DIRAC,
 
     /* various PCM "codecs" */
     CODEC_ID_PCM_S16LE= 0x10000,
