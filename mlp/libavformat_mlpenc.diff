Index: libavformat/Makefile
===================================================================
--- libavformat/Makefile	(revision 18631)
+++ libavformat/Makefile	(working copy)
@@ -89,6 +89,7 @@
 OBJS-$(CONFIG_MJPEG_DEMUXER)             += raw.o
 OBJS-$(CONFIG_MJPEG_MUXER)               += raw.o
 OBJS-$(CONFIG_MLP_DEMUXER)               += raw.o id3v2.o
+OBJS-$(CONFIG_MLP_MUXER)                 += raw.o
 OBJS-$(CONFIG_MM_DEMUXER)                += mm.o
 OBJS-$(CONFIG_MMF_DEMUXER)               += mmf.o raw.o
 OBJS-$(CONFIG_MMF_MUXER)                 += mmf.o riff.o
Index: libavformat/raw.c
===================================================================
--- libavformat/raw.c	(revision 18631)
+++ libavformat/raw.c	(working copy)
@@ -973,6 +973,21 @@
 };
 #endif
 
+#ifdef CONFIG_MLP_MUXER
+AVOutputFormat mlp_muxer = {
+    "mlp",
+    NULL_IF_CONFIG_SMALL("raw MLP"),
+    NULL,
+    "mlp",
+    0,
+    CODEC_ID_MLP,
+    CODEC_ID_NONE,
+    NULL,
+    raw_write_packet,
+    .flags= AVFMT_NOTIMESTAMPS,
+};
+#endif
+
 #if CONFIG_TRUEHD_DEMUXER
 AVInputFormat truehd_demuxer = {
     "truehd",
Index: libavformat/allformats.c
===================================================================
--- libavformat/allformats.c	(revision 18631)
+++ libavformat/allformats.c	(working copy)
@@ -102,7 +102,7 @@
     REGISTER_MUXDEMUX (MATROSKA, matroska);
     REGISTER_MUXER    (MATROSKA_AUDIO, matroska_audio);
     REGISTER_MUXDEMUX (MJPEG, mjpeg);
-    REGISTER_DEMUXER  (MLP, mlp);
+    REGISTER_MUXDEMUX (MLP, mlp);
     REGISTER_DEMUXER  (MM, mm);
     REGISTER_MUXDEMUX (MMF, mmf);
     REGISTER_MUXDEMUX (MOV, mov);
